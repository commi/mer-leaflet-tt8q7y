<div class="card flex-grow-1">
  <div class="card-body d-flex flex-column gap-3">
    <div class="row">
      <!-- LEFT: 3 Charts (col-lg-9) -->
      <div class="col-lg-9">
        <div class="row">
          <!-- Left column: Bestand + Kosten -->
          <div class="col-lg-6 mb-4">
            <!-- Bestand Chart -->
            <div>
              <div #bestandChartContainer class="chart-container"></div>
              <div class="text-center small mt-2">{{chartConfigs[0].unitLabel}}</div>
            </div>

            <!-- Kosten Chart -->
            <div class="mt-4">
              <div #kostenChartContainer class="chart-container"></div>
              <div class="text-center small mt-2">{{chartConfigs[1].unitLabel}}</div>
            </div>
          </div>

          <!-- Right column: THG -->
          <div class="col-lg-6 mb-4">
            <div #thgChartContainer class="chart-container"></div>
            <div class="text-center small mt-2">{{chartConfigs[2].unitLabel}}</div>
          </div>
        </div>
      </div>

      <!-- RIGHT SIDEBAR: Legend & Controls (col-lg-3) -->
      <div class="col-lg-3">
        <!-- Global Legend -->
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="h6 mb-2">Abkürzungen</h5>
            <div class="small">
              <div class="mb-1">
                <span style="color: #4CA8F2;">■</span> <strong>BEV</strong> = Batterieelektrisch
              </div>
              <div class="mb-1">
                <span style="color: #92C020;">■</span> <strong>BWS</strong> = Batteriewechselsystem
              </div>
              <div class="mb-1">
                <span style="color: #DEC600;">■</span> <strong>OL</strong> = Oberleitung
              </div>
              <div class="mb-1">
                <span style="color: #C00000;">■</span> <strong>FCEV</strong> = H₂-Brennstoffzelle
              </div>
              <div>
                <span style="color: #9A9A9A;">■</span> <strong>Diesel</strong>
              </div>
            </div>
          </div>
        </div>

        <!-- Size Class Controls -->
        <div class="card">
          <div class="card-body">
            <h5 class="h6 mb-2">Größenklassen</h5>
            @for (sizeClass of sizeClasses; track sizeClass) {
              <div class="form-check">
                <input class="form-check-input"
                       type="checkbox"
                       [id]="'size-' + sizeClass"
                       [checked]="isSizeClassSelected(sizeClass)"
                       (change)="toggleSizeClass(sizeClass)">
                <label class="form-check-label" [for]="'size-' + sizeClass">
                  {{sizeClass === 'alle Größenklassen' ? 'Alle Größenklassen' : sizeClass.replace('t', ' t')}}
                </label>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
